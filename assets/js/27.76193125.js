(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{479:function(a,t,s){a.exports=s.p+"assets/img/05-01.f02be035.png"},553:function(a,t,s){"use strict";s.r(t);var e=s(33),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"tomcat-源码调试环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-源码调试环境搭建"}},[a._v("#")]),a._v(" Tomcat 源码调试环境搭建")]),a._v(" "),t("h2",{attrs:{id:"_1-下载代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载代码"}},[a._v("#")]),a._v(" 1. 下载代码")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone  git@github.com:apache/tomcat.git\n")])])]),t("h2",{attrs:{id:"_2-安装ant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装ant"}},[a._v("#")]),a._v(" 2. 安装ant")]),a._v(" "),t("ol",[t("li",[a._v("我本地安装的是 "),t("code",[a._v("1.10.12")]),a._v(" 版本, "),t("a",{attrs:{href:"https://ant.apache.org/bindownload.cgi",target:"_blank",rel:"noopener noreferrer"}},[a._v("ant 下载地址"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("配置环境变量 "),t("code",[a._v("ANT_HOME")]),a._v(", 加入到 "),t("code",[a._v("PATH")]),a._v(" 环境变量中")]),a._v(" "),t("li",[a._v("执行命令验证 "),t("code",[a._v("ant -version")])])]),a._v(" "),t("h2",{attrs:{id:"_3-导入到-idea-中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-导入到-idea-中"}},[a._v("#")]),a._v(" 3. 导入到 idea 中")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入 tomcat 根目前")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" tomcat \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 复制配置文件 build.properties")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" build.properties.default build.properties\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更改 build.properties 中的配置")]),a._v("\nbase.path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("第三方jar的下载目录\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置 idea")]),a._v("\nant ide-intellij\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行编译命令, 会生成 output 目录")]),a._v("\nant deploy\n")])])]),t("p",[a._v("然后用 idea 打开项目，idea 会弹出让你配置"),t("strong",[a._v("下面的变量")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("ANT_HOME          "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ant.home}")]),a._v("\nTOMCAT_BUILD_LIBS "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${base.path}")]),a._v("\n")])])]),t("h2",{attrs:{id:"_4-idea-中-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-idea-中-配置"}},[a._v("#")]),a._v(" 4. idea 中 配置")]),a._v(" "),t("ul",[t("li",[a._v("检查你的"),t("strong",[a._v("项目依赖")]),a._v("有没有问题")])]),a._v(" "),t("p",[t("img",{attrs:{src:s(479),alt:"项目依赖配置"}})]),a._v(" "),t("p",[a._v("上面的"),t("strong",[a._v("三个依赖")]),a._v("，其实就是 "),t("strong",[a._v("ServletContainerInitializer")]),a._v(" 的实现, 比如 "),t("code",[a._v("res/META-INF/jasper.jar/services/jakarta.servlet.ServletContainerInitializer")]),a._v(".")]),a._v(" "),t("ul",[t("li",[a._v("更改配置文件 conf/server.xml")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 改为编译输出目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("appBase")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"output/build/webapps"')]),a._v("\n")])])]),t("ul",[t("li",[a._v("运行程序")])]),a._v(" "),t("p",[t("code",[a._v("org.apache.catalina.startup.Bootstrap#main")])])])}),[],!1,null,null,null);t.default=r.exports}}]);