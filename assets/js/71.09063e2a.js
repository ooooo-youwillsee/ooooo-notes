(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{551:function(t,e,n){"use strict";n.r(e);var s=n(33),a=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"logstash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#logstash"}},[t._v("#")]),t._v(" logstash")]),t._v(" "),e("ol",[e("li",[t._v("install logstash")])]),t._v(" "),e("p",[t._v("refer to "),e("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("logstash document"),e("OutboundLink")],1)]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("logstash example config file")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('input { \n    tcp {\n        port => 12345\n        codec => "json_lines"\n    }\n}\nfilter{\n    grok {\n        match => ["message", "%{TIMESTAMP_ISO8601:logdate}"]\n    }\n\n    date {\n        match => ["logdate", "yyyy-MM-dd HH:mm:ss.SSS"]\n        target => "@timestamp"\n    }\n\n    mutate {  \n        remove_field => ["logdate"]  \n    } \n\n    ruby {   \n        code => "event.set(\'timestamp\', event.get(\'@timestamp\').time.localtime + 8*60*60)"   \n    }  \n\n    ruby {  \n        code => "event.set(\'@timestamp\',event.get(\'timestamp\'))"  \n    } \n\n    mutate {  \n        remove_field => ["timestamp"]  \n    } \n}\noutput {\n  stdout { codec => rubydebug { metadata => true } }\n  file {\n    path => "./logs/%{+YYYY-MM-dd-HH}.log"\n    codec => line { format => "%{message}"}\n  }\n}\n\n')])])]),e("p",[t._v("notes:")]),t._v(" "),e("ol",[e("li",[t._v("it will serve "),e("strong",[t._v("TCP")]),t._v(" connection on "),e("strong",[t._v("localhost:12345")]),t._v(".")]),t._v(" "),e("li",[t._v("uses codec named "),e("code",[t._v("json_lines")]),t._v(", json data format such as "),e("code",[t._v('{ "message" : "xxxx" }')]),t._v(".")]),t._v(" "),e("li",[t._v("matche "),e("strong",[t._v("date")]),t._v(" pattern in the log, then use it as its time.")]),t._v(" "),e("li",[t._v("reset the field "),e("code",[t._v("@timestamp")]),t._v(", output to the local file.")])])])}),[],!1,null,null,null);e.default=a.exports}}]);